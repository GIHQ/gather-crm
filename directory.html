<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alumni Directory | GATHER</title>
    <meta name="description" content="Explore our global network of Chicago Peace Fellows and Goldin Global Fellows alumni.">
    <!-- GATHER Favicon -->
    <link rel="icon" type="image/png" href="Gathericon.png">
    <link rel="apple-touch-icon" href="Gathericon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        goldin: { orange: '#F37122', 'orange-dark': '#D65608', 'orange-light': '#FF8F4A', 'gray-dark': '#3D3D3D', gray: '#545454', 'gray-light': '#828282' }
                    },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', -apple-system, sans-serif; background: #f8fafc; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .card-hover { transition: all 0.2s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px -8px rgba(0,0,0,0.15); }
        .card-hover img { transition: transform 0.3s ease; }
        .card-hover:hover img { transform: scale(1.05); }
        .filter-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 8L1 3h10z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 32px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
        .social-icon { transition: all 0.2s ease; }
        .social-icon:hover { transform: scale(1.1); }
        .copy-btn:active { transform: scale(0.95); }
        /* Status indicators */
        .status-dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; flex-shrink: 0; }
        .status-dot.green { background-color: #22c55e; box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2); }
        .status-dot.yellow { background-color: #eab308; box-shadow: 0 0 0 3px rgba(234, 179, 8, 0.2); }
        .status-dot.red { background-color: #ef4444; box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2); }
        .status-dot.pulse { animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        /* Skeleton loading */
        .skeleton { background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        /* Filter chips */
        .filter-chip { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; background: #f1f5f9; border-radius: 9999px; font-size: 13px; }
        .filter-chip button { padding: 2px; border-radius: 50%; }
        .filter-chip button:hover { background: rgba(0,0,0,0.1); }
        /* Tabs */
        .tab-btn { padding: 8px 16px; font-weight: 500; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab-btn:hover { color: #F37122; }
        .tab-btn.active { color: #F37122; border-bottom-color: #F37122; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useMemo, useEffect } = React;

// GATHER Logo Base64
const GATHER_LOGO = "data:image/png;base64,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";

const SUPABASE_URL = 'https://pwazurumpzydxyppbvee.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB3YXp1cnVtcHp5ZHh5cHBidmVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MjM3MDUsImV4cCI6MjA4NTA5OTcwNX0.iGLmSpTPM84lMGGizSfBnkDCvpMZaJVaFhcRJ9cYDrs';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// Social Icons
const LinkedInIcon = () => <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>;
const TwitterIcon = () => <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>;
const InstagramIcon = () => <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>;
const FacebookIcon = () => <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>;
const WebsiteIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>;
const EmailIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>;
const PhoneIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>;
const SMSIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>;
const CopyIcon = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>;
const CheckIcon = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7"/></svg>;

// UN M49 Country to Region Mapping
const COUNTRY_REGIONS = {
  'Burundi': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Ethiopia': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Kenya': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Rwanda': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Somalia': { region: 'Africa', subRegion: 'Eastern Africa' },
  'South Sudan': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Tanzania': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Uganda': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Zambia': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Zimbabwe': { region: 'Africa', subRegion: 'Eastern Africa' },
  'Cameroon': { region: 'Africa', subRegion: 'Middle Africa' },
  'Democratic Republic of Congo': { region: 'Africa', subRegion: 'Middle Africa' },
  'DRC': { region: 'Africa', subRegion: 'Middle Africa' },
  'Congo': { region: 'Africa', subRegion: 'Middle Africa' },
  'Libya': { region: 'Africa', subRegion: 'Northern Africa' },
  'Egypt': { region: 'Africa', subRegion: 'Northern Africa' },
  'Sudan': { region: 'Africa', subRegion: 'Northern Africa' },
  'South Africa': { region: 'Africa', subRegion: 'Southern Africa' },
  "Cote d'Ivoire": { region: 'Africa', subRegion: 'Western Africa' },
  'Ivory Coast': { region: 'Africa', subRegion: 'Western Africa' },
  'Ghana': { region: 'Africa', subRegion: 'Western Africa' },
  'Liberia': { region: 'Africa', subRegion: 'Western Africa' },
  'Mali': { region: 'Africa', subRegion: 'Western Africa' },
  'Nigeria': { region: 'Africa', subRegion: 'Western Africa' },
  'Senegal': { region: 'Africa', subRegion: 'Western Africa' },
  'Sierra Leone': { region: 'Africa', subRegion: 'Western Africa' },
  'USA': { region: 'Americas', subRegion: 'North America' },
  'United States': { region: 'Americas', subRegion: 'North America' },
  'United States of America': { region: 'Americas', subRegion: 'North America' },
  'Canada': { region: 'Americas', subRegion: 'North America' },
  'Mexico': { region: 'Americas', subRegion: 'North America' },
  'Honduras': { region: 'Americas', subRegion: 'Central America' },
  'Guatemala': { region: 'Americas', subRegion: 'Central America' },
  'El Salvador': { region: 'Americas', subRegion: 'Central America' },
  'Nicaragua': { region: 'Americas', subRegion: 'Central America' },
  'Costa Rica': { region: 'Americas', subRegion: 'Central America' },
  'Panama': { region: 'Americas', subRegion: 'Central America' },
  'Cuba': { region: 'Americas', subRegion: 'Caribbean' },
  'Dominican Republic': { region: 'Americas', subRegion: 'Caribbean' },
  'Grenada': { region: 'Americas', subRegion: 'Caribbean' },
  'Haiti': { region: 'Americas', subRegion: 'Caribbean' },
  'Jamaica': { region: 'Americas', subRegion: 'Caribbean' },
  'Puerto Rico': { region: 'Americas', subRegion: 'Caribbean' },
  'Argentina': { region: 'Americas', subRegion: 'South America' },
  'Bolivia': { region: 'Americas', subRegion: 'South America' },
  'Brazil': { region: 'Americas', subRegion: 'South America' },
  'Chile': { region: 'Americas', subRegion: 'South America' },
  'Colombia': { region: 'Americas', subRegion: 'South America' },
  'Ecuador': { region: 'Americas', subRegion: 'South America' },
  'Paraguay': { region: 'Americas', subRegion: 'South America' },
  'Peru': { region: 'Americas', subRegion: 'South America' },
  'Uruguay': { region: 'Americas', subRegion: 'South America' },
  'Venezuela': { region: 'Americas', subRegion: 'South America' },
  'Bangladesh': { region: 'Asia', subRegion: 'Southern Asia' },
  'Bhutan': { region: 'Asia', subRegion: 'Southern Asia' },
  'India': { region: 'Asia', subRegion: 'Southern Asia' },
  'Iran': { region: 'Asia', subRegion: 'Southern Asia' },
  'Nepal': { region: 'Asia', subRegion: 'Southern Asia' },
  'Pakistan': { region: 'Asia', subRegion: 'Southern Asia' },
  'Sri Lanka': { region: 'Asia', subRegion: 'Southern Asia' },
  'Afghanistan': { region: 'Asia', subRegion: 'Southern Asia' },
  'Malaysia': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Philippines': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Indonesia': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Thailand': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Vietnam': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Myanmar': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Cambodia': { region: 'Asia', subRegion: 'South-Eastern Asia' },
  'Armenia': { region: 'Asia', subRegion: 'Western Asia' },
  'Israel': { region: 'Asia', subRegion: 'Western Asia' },
  'Palestine': { region: 'Asia', subRegion: 'Western Asia' },
  'Jordan': { region: 'Asia', subRegion: 'Western Asia' },
  'Lebanon': { region: 'Asia', subRegion: 'Western Asia' },
  'Syria': { region: 'Asia', subRegion: 'Western Asia' },
  'Turkey': { region: 'Asia', subRegion: 'Western Asia' },
  'Iraq': { region: 'Asia', subRegion: 'Western Asia' },
  'Yemen': { region: 'Asia', subRegion: 'Western Asia' },
  'China': { region: 'Asia', subRegion: 'Eastern Asia' },
  'Japan': { region: 'Asia', subRegion: 'Eastern Asia' },
  'South Korea': { region: 'Asia', subRegion: 'Eastern Asia' },
  'Taiwan': { region: 'Asia', subRegion: 'Eastern Asia' },
  'Romania': { region: 'Europe', subRegion: 'Eastern Europe' },
  'Russia': { region: 'Europe', subRegion: 'Eastern Europe' },
  'Poland': { region: 'Europe', subRegion: 'Eastern Europe' },
  'Ukraine': { region: 'Europe', subRegion: 'Eastern Europe' },
  'United Kingdom': { region: 'Europe', subRegion: 'Northern Europe' },
  'UK': { region: 'Europe', subRegion: 'Northern Europe' },
  'Ireland': { region: 'Europe', subRegion: 'Northern Europe' },
  'Sweden': { region: 'Europe', subRegion: 'Northern Europe' },
  'Norway': { region: 'Europe', subRegion: 'Northern Europe' },
  'Denmark': { region: 'Europe', subRegion: 'Northern Europe' },
  'Finland': { region: 'Europe', subRegion: 'Northern Europe' },
  'Albania': { region: 'Europe', subRegion: 'Southern Europe' },
  'Croatia': { region: 'Europe', subRegion: 'Southern Europe' },
  'Kosovo': { region: 'Europe', subRegion: 'Southern Europe' },
  'Macedonia': { region: 'Europe', subRegion: 'Southern Europe' },
  'North Macedonia': { region: 'Europe', subRegion: 'Southern Europe' },
  'Spain': { region: 'Europe', subRegion: 'Southern Europe' },
  'Italy': { region: 'Europe', subRegion: 'Southern Europe' },
  'Greece': { region: 'Europe', subRegion: 'Southern Europe' },
  'Serbia': { region: 'Europe', subRegion: 'Southern Europe' },
  'Portugal': { region: 'Europe', subRegion: 'Southern Europe' },
  'Germany': { region: 'Europe', subRegion: 'Western Europe' },
  'France': { region: 'Europe', subRegion: 'Western Europe' },
  'Netherlands': { region: 'Europe', subRegion: 'Western Europe' },
  'Belgium': { region: 'Europe', subRegion: 'Western Europe' },
  'Switzerland': { region: 'Europe', subRegion: 'Western Europe' },
  'Austria': { region: 'Europe', subRegion: 'Western Europe' },
  'Australia': { region: 'Oceania', subRegion: 'Australia and New Zealand' },
  'New Zealand': { region: 'Oceania', subRegion: 'Australia and New Zealand' },
};

function getRegionFromCountry(country) {
  if (!country) return { region: null, subRegion: null };
  if (COUNTRY_REGIONS[country]) return COUNTRY_REGIONS[country];
  const countryLower = country.toLowerCase();
  for (const [key, value] of Object.entries(COUNTRY_REGIONS)) {
    if (key.toLowerCase() === countryLower) return value;
  }
  return { region: null, subRegion: null };
}

// Contact status calculation (üü¢üü°üî¥)
function getContactStatus(lastContact) {
  if (!lastContact) return { color: 'red', label: 'Never contacted', days: null, className: 'red pulse' };
  const now = new Date();
  const last = new Date(lastContact);
  const diffDays = Math.floor((now - last) / (1000 * 60 * 60 * 24));
  if (diffDays <= 30) return { color: 'green', label: 'Recent contact', days: diffDays, className: 'green' };
  if (diffDays <= 90) return { color: 'yellow', label: 'Follow-up needed', days: diffDays, className: 'yellow' };
  return { color: 'red', label: 'Overdue', days: diffDays, className: 'red pulse' };
}

// Status Dot Component
function StatusDot({ lastContact, showLabel = false }) {
  const status = getContactStatus(lastContact);
  return (
    <div className="flex items-center gap-2" title={`${status.label}${status.days !== null ? ` (${status.days} days ago)` : ''}`}>
      <span className={`status-dot ${status.className}`}></span>
      {showLabel && <span className="text-xs text-goldin-gray-light">{status.days !== null ? `${status.days}d` : 'Never'}</span>}
    </div>
  );
}

const FOCUS_AREAS = {
  'FA001': { name: 'Peacebuilding & Conflict Resolution', icon: 'üïäÔ∏è' },
  'FA002': { name: 'Human Rights & Advocacy', icon: '‚öñÔ∏è' },
  'FA003': { name: "Gender Justice & Women's Empowerment", icon: '‚ôÄÔ∏è' },
  'FA004': { name: 'Youth Development & Leadership', icon: 'üåü' },
  'FA005': { name: 'Education & Academic Support', icon: 'üìö' },
  'FA006': { name: 'Community Development & Empowerment', icon: 'üèòÔ∏è' },
  'FA007': { name: 'Violence Prevention & Survivor Support', icon: 'üõ°Ô∏è' },
  'FA008': { name: 'Child Protection & Rights', icon: 'üë∂' },
  'FA009': { name: 'Mental Health & Trauma Support', icon: 'üíö' },
  'FA010': { name: 'Health & Disability Justice', icon: 'üè•' },
  'FA011': { name: 'Climate Action & Environmental Justice', icon: 'üåç' },
  'FA012': { name: 'Economic Development & Entrepreneurship', icon: 'üíº' },
  'FA013': { name: 'Humanitarian Aid & Disaster Response', icon: 'üÜò' },
  'FA014': { name: 'Migration & Refugee Support', icon: 'üåê' },
  'FA015': { name: 'Criminal Justice Reform & Reentry', icon: '‚öñÔ∏è' },
  'FA016': { name: 'Social Justice & Racial Equity', icon: '‚úä' },
  'FA017': { name: 'LGBTQ+ Rights & Inclusion', icon: 'üè≥Ô∏è‚Äçüåà' },
  'FA018': { name: 'Indigenous Rights & Cultural Preservation', icon: 'ü™∂' },
  'FA019': { name: 'Arts, Culture & Media', icon: 'üé®' },
  'FA020': { name: 'Interfaith Dialogue & Spiritual Wellness', icon: 'üôè' },
  'FA021': { name: 'Other', icon: 'üìå' }
};

function getProgramBadge(program) {
  if (program?.includes('CPF')) return { label: 'CPF', bgColor: 'bg-goldin-orange', title: 'Chicago Peace Fellow' };
  if (program?.includes('Espa√±ol') || program?.includes('Spanish')) return { label: 'ESP', bgColor: 'bg-emerald-600', title: 'Global Fellow - Spanish Cohort' };
  return { label: 'GGF', bgColor: 'bg-blue-600', title: 'Global Fellow - English Cohort' };
}

function getCohortYear(cohort) {
  if (!cohort) return null;
  const match = cohort.match(/^(\d{4})/);
  return match ? match[1] : null;
}

function formatUrl(url) {
  if (!url) return null;
  return url.startsWith('http') ? url : `https://${url}`;
}

// Copy to clipboard component
function CopyButton({ text, label }) {
  const [copied, setCopied] = useState(false);
  const handleCopy = async (e) => {
    e.stopPropagation();
    try {
      await navigator.clipboard.writeText(text);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error('Failed to copy:', err);
    }
  };
  return (
    <button onClick={handleCopy} className="copy-btn p-1 rounded hover:bg-gray-200 transition-colors" title={`Copy ${label}`}>
      {copied ? <CheckIcon /> : <CopyIcon />}
    </button>
  );
}

function Loading() {
  return (
    <div className="flex flex-col items-center justify-center py-20">
      <div className="w-12 h-12 border-4 border-goldin-orange border-t-transparent rounded-full animate-spin mb-4"></div>
      <p className="text-goldin-gray">Loading alumni directory...</p>
    </div>
  );
}

function ErrorMsg({ message, onRetry }) {
  return (
    <div className="flex flex-col items-center justify-center py-20 text-center px-4">
      <div className="text-5xl mb-4">‚ö†Ô∏è</div>
      <h3 className="text-xl font-semibold text-goldin-gray-dark mb-2">Unable to load directory</h3>
      <p className="text-goldin-gray mb-6 max-w-md">{message}</p>
      <button onClick={onRetry} className="px-6 py-3 bg-goldin-orange text-white rounded-xl font-medium hover:bg-goldin-orange-dark transition-colors">Try Again</button>
    </div>
  );
}

function StatusPills({ fellows, onStatusClick, activeStatus }) {
  const stats = useMemo(() => {
    const statusCounts = { green: 0, yellow: 0, red: 0 };
    fellows.forEach(f => {
      const status = getContactStatus(f.last_contact);
      statusCounts[status.color]++;
    });
    return { total: fellows.length, ...statusCounts };
  }, [fellows]);
  
  return (
    <div className="flex items-center gap-3">
      <span className="text-white/90 text-sm font-semibold hidden md:inline">{stats.total} Alumni</span>
      <div className="flex items-center gap-1.5">
        <button 
          onClick={() => onStatusClick(activeStatus === 'green' ? '' : 'green')}
          className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-semibold transition-all shadow-sm ${
            activeStatus === 'green' 
              ? 'bg-green-500 text-white ring-2 ring-white/50' 
              : 'bg-white text-green-700 hover:bg-green-50 border border-green-200'
          }`}
          title="Recent contact (‚â§30 days)"
        >
          <span className={`w-2 h-2 rounded-full ${activeStatus === 'green' ? 'bg-white' : 'bg-green-500'}`}></span>
          <span>{stats.green}</span>
        </button>
        <button 
          onClick={() => onStatusClick(activeStatus === 'yellow' ? '' : 'yellow')}
          className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-semibold transition-all shadow-sm ${
            activeStatus === 'yellow' 
              ? 'bg-yellow-500 text-white ring-2 ring-white/50' 
              : 'bg-white text-yellow-700 hover:bg-yellow-50 border border-yellow-200'
          }`}
          title="Follow-up needed (31-90 days)"
        >
          <span className={`w-2 h-2 rounded-full ${activeStatus === 'yellow' ? 'bg-white' : 'bg-yellow-500'}`}></span>
          <span>{stats.yellow}</span>
        </button>
        <button 
          onClick={() => onStatusClick(activeStatus === 'red' ? '' : 'red')}
          className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-semibold transition-all shadow-sm ${
            activeStatus === 'red' 
              ? 'bg-red-500 text-white ring-2 ring-white/50' 
              : 'bg-white text-red-700 hover:bg-red-50 border border-red-200'
          }`}
          title="Overdue (90+ days)"
        >
          <span className={`w-2 h-2 rounded-full ${activeStatus === 'red' ? 'bg-white' : 'bg-red-500'}`}></span>
          <span>{stats.red}</span>
        </button>
      </div>
    </div>
  );
}

// Social Links for cards (compact)
function SocialLinks({ fellow }) {
  const links = [];
  if (fellow.linkedin) links.push({ icon: <LinkedInIcon />, url: formatUrl(fellow.linkedin), label: 'LinkedIn', color: 'hover:text-[#0077b5]' });
  if (fellow.twitter) links.push({ icon: <TwitterIcon />, url: formatUrl(fellow.twitter), label: 'Twitter/X', color: 'hover:text-black' });
  if (fellow.instagram) links.push({ icon: <InstagramIcon />, url: formatUrl(fellow.instagram), label: 'Instagram', color: 'hover:text-pink-600' });
  if (fellow.facebook) links.push({ icon: <FacebookIcon />, url: formatUrl(fellow.facebook), label: 'Facebook', color: 'hover:text-[#1877f2]' });
  if (fellow.website) links.push({ icon: <WebsiteIcon />, url: formatUrl(fellow.website), label: 'Website', color: 'hover:text-goldin-orange' });
  
  if (links.length === 0) return null;
  
  return (
    <div className="flex gap-1.5 mt-2">
      {links.map((link, i) => (
        <a key={i} href={link.url} target="_blank" rel="noopener noreferrer" title={link.label}
           onClick={(e) => e.stopPropagation()}
           className={`social-icon text-goldin-gray-light ${link.color} p-1.5 rounded-lg hover:bg-gray-100`}>
          {link.icon}
        </a>
      ))}
    </div>
  );
}

// Fellow Card
function FellowCard({ fellow, onClick }) {
  const defaultPhoto = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f1f5f9' width='100' height='100'/%3E%3Ccircle cx='50' cy='35' r='18' fill='%23cbd5e1'/%3E%3Cellipse cx='50' cy='80' rx='28' ry='22' fill='%23cbd5e1'/%3E%3C/svg%3E";
  const badge = getProgramBadge(fellow.program);
  const year = getCohortYear(fellow.cohort);
  const name = `${fellow.first_name || ''} ${fellow.last_name || ''}`.trim();
  
  return (
    <div onClick={() => onClick(fellow)} className="bg-white rounded-2xl shadow-sm card-hover cursor-pointer overflow-hidden border border-gray-100">
      <div className="aspect-[4/3] bg-gray-100 relative overflow-hidden">
        <img src={fellow.photo_url || defaultPhoto} alt={name} className="w-full h-full object-cover" loading="lazy" onError={(e) => { e.target.src = defaultPhoto; }} />
        <div className="absolute top-3 left-3">
          <StatusDot lastContact={fellow.last_contact} />
        </div>
        <div className="absolute top-3 right-3 flex gap-1.5">
          <span className={`${badge.bgColor} text-white text-xs font-semibold px-2.5 py-1 rounded-full`} title={badge.title}>{badge.label}</span>
          {year && <span className="bg-gray-800/80 text-white text-xs font-semibold px-2.5 py-1 rounded-full">{year}</span>}
        </div>
      </div>
      <div className="p-5">
        <h3 className="font-semibold text-goldin-gray-dark text-lg leading-tight">{name}</h3>
        {fellow.job_title && <p className="text-goldin-orange text-sm font-medium mt-1 line-clamp-1">{fellow.job_title}</p>}
        {fellow.organization && <p className="text-goldin-gray text-sm mt-1 line-clamp-1">{fellow.organization}</p>}
        <div className="flex items-center gap-1.5 mt-3 text-goldin-gray-light text-sm">
          <svg className="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
          <span className="line-clamp-1">{[fellow.city, fellow.country].filter(Boolean).join(', ') || 'Location not specified'}</span>
        </div>
        <SocialLinks fellow={fellow} />
      </div>
    </div>
  );
}

// Modal
function Modal({ fellow, onClose, onLogInteraction }) {
  if (!fellow) return null;
  const defaultPhoto = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f1f5f9' width='100' height='100'/%3E%3Ccircle cx='50' cy='35' r='18' fill='%23cbd5e1'/%3E%3Cellipse cx='50' cy='80' rx='28' ry='22' fill='%23cbd5e1'/%3E%3C/svg%3E";
  const name = `${fellow.first_name || ''} ${fellow.last_name || ''}`.trim();
  const focusAreas = [fellow.focus_area_1, fellow.focus_area_2, fellow.focus_area_3].filter(Boolean).map(id => FOCUS_AREAS[id]).filter(Boolean);
  const badge = getProgramBadge(fellow.program);
  const year = getCohortYear(fellow.cohort);
  const regionInfo = getRegionFromCountry(fellow.country);
  
  useEffect(() => {
    const handleEsc = (e) => { if (e.key === 'Escape') onClose(); };
    window.addEventListener('keydown', handleEsc);
    document.body.style.overflow = 'hidden';
    return () => { window.removeEventListener('keydown', handleEsc); document.body.style.overflow = ''; };
  }, [onClose]);
  
  return (
    <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={onClose}>
      <div className="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-hidden shadow-2xl fade-in" onClick={e => e.stopPropagation()}>
        <div className="relative">
          <div className="h-28 bg-gradient-to-br from-goldin-orange to-goldin-orange-dark"></div>
          {/* Action buttons row - top right */}
          <div className="absolute top-4 right-4 flex items-center gap-2">
            {fellow.email && (
              <a href={`mailto:${fellow.email}`} className="flex items-center justify-center w-10 h-10 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-xl transition-all hover:scale-105" title="Send Email">
                <EmailIcon />
              </a>
            )}
            {fellow.phone && (
              <a href={`tel:${fellow.phone}`} className="flex items-center justify-center w-10 h-10 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-xl transition-all hover:scale-105" title="Call">
                <PhoneIcon />
              </a>
            )}
            {fellow.phone && (
              <a href={`sms:${fellow.phone}`} className="flex items-center justify-center w-10 h-10 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-xl transition-all hover:scale-105" title="Send SMS">
                <SMSIcon />
              </a>
            )}
            <button onClick={onClose} className="flex items-center justify-center w-10 h-10 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-xl transition-all hover:scale-105" title="Close">
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
          </div>
          <div className="absolute -bottom-12 left-6">
            <img src={fellow.photo_url || defaultPhoto} alt={name} className="w-24 h-24 rounded-xl object-cover border-4 border-white shadow-xl" onError={(e) => { e.target.src = defaultPhoto; }} />
          </div>
        </div>
        <div className="pt-14 px-6 pb-6 overflow-y-auto max-h-[calc(90vh-7rem)]">
          <div className="flex flex-wrap items-start justify-between gap-4 mb-4">
            <div>
              <h2 className="text-2xl font-bold text-goldin-gray-dark">{name}</h2>
              {fellow.job_title && <p className="text-goldin-orange font-medium">{fellow.job_title}</p>}
              {fellow.organization && <p className="text-goldin-gray">{fellow.organization}</p>}
            </div>
            <div className="flex gap-2 flex-wrap items-center">
              <StatusDot lastContact={fellow.last_contact} showLabel />
              <span className={`${badge.bgColor} text-white px-3 py-1.5 rounded-lg text-sm font-semibold`} title={badge.title}>{badge.label}</span>
              {year && <span className="bg-gray-700 text-white px-3 py-1.5 rounded-lg text-sm font-semibold">{year}</span>}
            </div>
          </div>
          
          {/* Last Contact Banner */}
          {(() => {
            const status = getContactStatus(fellow.last_contact);
            const bgColors = { green: 'bg-green-50 border-green-200', yellow: 'bg-yellow-50 border-yellow-200', red: 'bg-red-50 border-red-200' };
            const textColors = { green: 'text-green-800', yellow: 'text-yellow-800', red: 'text-red-800' };
            return (
              <div className={`${bgColors[status.color]} border rounded-xl p-3 mb-4 flex items-center justify-between`}>
                <div className="flex items-center gap-2">
                  <StatusDot lastContact={fellow.last_contact} />
                  <span className={`text-sm font-medium ${textColors[status.color]}`}>
                    {status.label}{status.days !== null ? ` ¬∑ Last contact ${status.days} days ago` : ''}
                  </span>
                </div>
                <button 
                  onClick={(e) => { e.stopPropagation(); onLogInteraction && onLogInteraction(fellow); }}
                  className="text-xs px-3 py-1 bg-white rounded-lg border shadow-sm hover:shadow transition-shadow"
                >
                  + Log Interaction
                </button>
              </div>
            );
          })()}
          
          {/* Contact Info Section - Copyable */}
          {(fellow.email || fellow.phone) && (
            <div className="bg-gray-50 rounded-xl p-4 mb-4">
              <h3 className="font-semibold text-goldin-gray-dark text-sm mb-3">Contact Information</h3>
              <div className="space-y-2">
                {fellow.email && (
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-2 text-sm">
                      <EmailIcon />
                      <span className="text-goldin-gray-dark">{fellow.email}</span>
                    </div>
                    <CopyButton text={fellow.email} label="email" />
                  </div>
                )}
                {fellow.phone && (
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-2 text-sm">
                      <PhoneIcon />
                      <span className="text-goldin-gray-dark">{fellow.phone}</span>
                    </div>
                    <CopyButton text={fellow.phone} label="phone" />
                  </div>
                )}
              </div>
            </div>
          )}
          
          {/* Social Links Section */}
          {(fellow.linkedin || fellow.twitter || fellow.instagram || fellow.facebook || fellow.website) && (
            <div className="bg-gray-50 rounded-xl p-4 mb-4">
              <h3 className="font-semibold text-goldin-gray-dark text-sm mb-3">Social & Web</h3>
              <div className="flex flex-wrap gap-2">
                {fellow.linkedin && (
                  <a href={formatUrl(fellow.linkedin)} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1.5 bg-[#0077b5] text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-[#006399]">
                    <LinkedInIcon /> LinkedIn
                  </a>
                )}
                {fellow.twitter && (
                  <a href={formatUrl(fellow.twitter)} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1.5 bg-black text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-gray-800">
                    <TwitterIcon /> Twitter/X
                  </a>
                )}
                {fellow.instagram && (
                  <a href={formatUrl(fellow.instagram)} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:from-purple-600 hover:to-pink-600">
                    <InstagramIcon /> Instagram
                  </a>
                )}
                {fellow.facebook && (
                  <a href={formatUrl(fellow.facebook)} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1.5 bg-[#1877f2] text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-[#166fe5]">
                    <FacebookIcon /> Facebook
                  </a>
                )}
                {fellow.website && (
                  <a href={formatUrl(fellow.website)} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1.5 bg-goldin-gray-dark text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-black">
                    <WebsiteIcon /> Website
                  </a>
                )}
              </div>
            </div>
          )}
          
          <div className="grid grid-cols-2 gap-3 p-4 bg-gray-50 rounded-xl mb-4 text-sm">
            <div><p className="text-xs text-goldin-gray-light uppercase tracking-wider font-medium">Location</p><p className="text-goldin-gray-dark font-medium mt-0.5">{[fellow.city, fellow.country].filter(Boolean).join(', ') || '‚Äî'}</p></div>
            <div><p className="text-xs text-goldin-gray-light uppercase tracking-wider font-medium">Region</p><p className="text-goldin-gray-dark font-medium mt-0.5">{regionInfo.subRegion || regionInfo.region || '‚Äî'}</p></div>
            <div><p className="text-xs text-goldin-gray-light uppercase tracking-wider font-medium">Program</p><p className="text-goldin-gray-dark font-medium mt-0.5">{fellow.program || '‚Äî'}</p></div>
            <div><p className="text-xs text-goldin-gray-light uppercase tracking-wider font-medium">Cohort</p><p className="text-goldin-gray-dark font-medium mt-0.5">{fellow.cohort || '‚Äî'}</p></div>
            {fellow.community_area && <div className="col-span-2"><p className="text-xs text-goldin-gray-light uppercase tracking-wider font-medium">Chicago Area</p><p className="text-goldin-gray-dark font-medium mt-0.5">{fellow.community_area}</p></div>}
          </div>
          
          {fellow.biography && <div className="mb-4"><h3 className="font-semibold text-goldin-gray-dark text-sm mb-2">About</h3><p className="text-goldin-gray text-sm leading-relaxed whitespace-pre-line">{fellow.biography}</p></div>}
          {focusAreas.length > 0 && <div><h3 className="font-semibold text-goldin-gray-dark text-sm mb-2">Focus Areas</h3><div className="flex flex-wrap gap-2">{focusAreas.map((fa, i) => <span key={i} className="inline-flex items-center gap-1 bg-goldin-orange/10 text-goldin-orange-dark px-2.5 py-1 rounded-full text-xs font-medium"><span>{fa.icon}</span><span>{fa.name}</span></span>)}</div></div>}
        </div>
      </div>
    </div>
  );
}

// Log Interaction Modal for Directory
function LogInteractionModal({ isOpen, onClose, fellow, onSuccess }) {
  const [formData, setFormData] = useState({
    interaction_type: 'Call',
    subject: '',
    notes: '',
    interaction_date: new Date().toISOString().split('T')[0],
    follow_up_date: '',
  });
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState(null);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!fellow) return;
    setIsSubmitting(true);
    setError(null);
    
    const interaction = {
      fellow_id: fellow.id,
      interaction_type: formData.interaction_type,
      subject: formData.subject || null,
      notes: formData.notes || null,
      interaction_date: formData.interaction_date,
      follow_up_date: formData.follow_up_date || null,
      staff_email: 'staff@goldininstitute.org',
      auto_logged: false,
      follow_up_done: false,
      created_at: new Date().toISOString(),
    };
    
    console.log('Inserting interaction:', interaction);
    const { data, error: insertError } = await supabase.from('interactions').insert(interaction).select();
    console.log('Insert result:', { data, error: insertError });
    
    if (insertError) {
      console.error('Insert error:', insertError);
      setError(insertError.message || 'Failed to save interaction');
      setIsSubmitting(false);
      return;
    }
    
    // Update last_contact for the fellow
    await supabase
      .from('fellows')
      .update({ last_contact: new Date().toISOString() })
      .eq('id', fellow.id);
    
    setSuccess(true);
    setTimeout(() => {
      onSuccess && onSuccess();
      onClose();
      setSuccess(false);
      setError(null);
      setIsSubmitting(false);
      setFormData({
        interaction_type: 'Call',
        subject: '',
        notes: '',
        interaction_date: new Date().toISOString().split('T')[0],
        follow_up_date: '',
      });
    }, 1500);
  };

  if (!isOpen || !fellow) return null;

  return (
    <div className="fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4" onClick={onClose}>
      <div className="bg-white rounded-2xl w-full max-w-lg shadow-2xl" onClick={e => e.stopPropagation()}>
        <div className="flex items-center justify-between px-6 py-4 border-b">
          <div>
            <h2 className="text-xl font-bold text-goldin-gray-dark">Log Interaction</h2>
            <p className="text-sm text-goldin-gray">with {fellow.first_name} {fellow.last_name}</p>
          </div>
          <button onClick={onClose} className="p-2 hover:bg-gray-100 rounded-lg text-2xl leading-none">&times;</button>
        </div>
        
        {success ? (
          <div className="p-12 text-center">
            <div className="text-5xl mb-4">‚úÖ</div>
            <p className="text-lg font-medium text-green-600">Interaction logged!</p>
          </div>
        ) : (
          <form onSubmit={handleSubmit} className="p-6 space-y-4">
            {error && (
              <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                ‚ö†Ô∏è {error}
              </div>
            )}
            {/* Type and Date */}
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Type *</label>
                <select 
                  value={formData.interaction_type}
                  onChange={e => setFormData({...formData, interaction_type: e.target.value})}
                  className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-goldin-orange/50"
                >
                  <option value="Call">üìû Call</option>
                  <option value="Email">üìß Email</option>
                  <option value="Meeting">ü§ù Meeting</option>
                  <option value="Site Visit">üè† Site Visit</option>
                  <option value="Note">üìù Note</option>
                  <option value="Event">üéâ Event</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Date *</label>
                <input 
                  type="date"
                  value={formData.interaction_date}
                  onChange={e => setFormData({...formData, interaction_date: e.target.value})}
                  className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-goldin-orange/50"
                  required
                />
              </div>
            </div>
            
            {/* Subject */}
            <div>
              <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Subject</label>
              <input 
                type="text"
                value={formData.subject}
                onChange={e => setFormData({...formData, subject: e.target.value})}
                className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-goldin-orange/50"
                placeholder="e.g., Quarterly check-in, Grant follow-up"
              />
            </div>
            
            {/* Notes */}
            <div>
              <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Notes</label>
              <textarea 
                value={formData.notes}
                onChange={e => setFormData({...formData, notes: e.target.value})}
                className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-goldin-orange/50"
                rows={3}
                placeholder="Summary of the conversation..."
              />
            </div>
            
            {/* Follow-up Date */}
            <div>
              <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Follow-up Date (optional)</label>
              <input 
                type="date"
                value={formData.follow_up_date}
                onChange={e => setFormData({...formData, follow_up_date: e.target.value})}
                className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-goldin-orange/50"
              />
            </div>
            
            {/* Submit */}
            <div className="flex justify-end gap-3 pt-4">
              <button 
                type="button"
                onClick={onClose}
                className="px-4 py-2 text-goldin-gray hover:bg-gray-100 rounded-lg transition-colors"
              >
                Cancel
              </button>
              <button 
                type="submit"
                disabled={isSubmitting}
                className="px-6 py-2 bg-goldin-orange text-white rounded-lg hover:bg-goldin-orange-dark transition-colors disabled:opacity-50"
              >
                {isSubmitting ? 'Saving...' : 'Save Interaction'}
              </button>
            </div>
          </form>
        )}
      </div>
    </div>
  );
}

// Quick Add Modal with Fellow Search (for mobile header)
function QuickAddModal({ fellows, onClose, onSuccess }) {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedFellow, setSelectedFellow] = useState(null);
  const [showDropdown, setShowDropdown] = useState(false);
  const [formData, setFormData] = useState({
    interaction_type: 'Call',
    subject: '',
    notes: '',
    interaction_date: new Date().toISOString().split('T')[0],
    follow_up_date: '',
  });
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(false);

  const filteredFellows = useMemo(() => {
    if (!searchTerm) return [];
    const term = searchTerm.toLowerCase();
    return fellows
      .filter(f => 
        `${f.first_name} ${f.last_name}`.toLowerCase().includes(term) ||
        f.organization?.toLowerCase().includes(term)
      )
      .slice(0, 8);
  }, [fellows, searchTerm]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!selectedFellow) return;
    setIsSubmitting(true);
    setError(null);
    
    const interaction = {
      fellow_id: selectedFellow.id,
      interaction_type: formData.interaction_type,
      subject: formData.subject || null,
      notes: formData.notes || null,
      interaction_date: formData.interaction_date,
      follow_up_date: formData.follow_up_date || null,
      staff_email: 'staff@goldininstitute.org',
      auto_logged: false,
      follow_up_done: false,
      created_at: new Date().toISOString(),
    };
    
    const { error: insertError } = await supabase.from('interactions').insert(interaction);
    
    if (insertError) {
      setError(insertError.message || 'Failed to save');
      setIsSubmitting(false);
      return;
    }
    
    await supabase
      .from('fellows')
      .update({ last_contact: new Date().toISOString() })
      .eq('id', selectedFellow.id);
    
    setSuccess(true);
    setTimeout(() => onSuccess(), 1500);
  };

  return (
    <div className="fixed inset-0 bg-black/50 z-[100] flex items-end sm:items-center justify-center" onClick={onClose}>
      <div 
        className="bg-white w-full sm:max-w-lg sm:rounded-2xl rounded-t-2xl max-h-[90vh] overflow-auto shadow-2xl" 
        onClick={e => e.stopPropagation()}
      >
        <div className="flex items-center justify-between px-4 py-3 border-b sticky top-0 bg-white">
          <h2 className="text-lg font-bold text-goldin-gray-dark">Log Interaction</h2>
          <button onClick={onClose} className="p-2 hover:bg-gray-100 rounded-lg text-2xl leading-none">&times;</button>
        </div>
        
        {success ? (
          <div className="p-12 text-center">
            <div className="text-5xl mb-4">‚úÖ</div>
            <p className="text-lg font-medium text-green-600">Logged!</p>
          </div>
        ) : (
          <form onSubmit={handleSubmit} className="p-4 space-y-4">
            {error && (
              <div className="bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-sm">
                ‚ö†Ô∏è {error}
              </div>
            )}
            
            {/* Fellow Search */}
            <div className="relative">
              <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Fellow *</label>
              {selectedFellow ? (
                <div className="flex items-center justify-between bg-goldin-orange/10 border border-goldin-orange/30 rounded-lg px-3 py-2">
                  <span className="font-medium text-goldin-gray-dark">
                    {selectedFellow.first_name} {selectedFellow.last_name}
                  </span>
                  <button 
                    type="button"
                    onClick={() => { setSelectedFellow(null); setSearchTerm(''); }}
                    className="text-goldin-gray hover:text-red-500"
                  >
                    ‚úï
                  </button>
                </div>
              ) : (
                <>
                  <input
                    type="text"
                    value={searchTerm}
                    onChange={(e) => { setSearchTerm(e.target.value); setShowDropdown(true); }}
                    onFocus={() => setShowDropdown(true)}
                    placeholder="Search by name..."
                    className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-goldin-orange/50"
                  />
                  {showDropdown && filteredFellows.length > 0 && (
                    <div className="absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-auto">
                      {filteredFellows.map(f => (
                        <button
                          key={f.id}
                          type="button"
                          onClick={() => { setSelectedFellow(f); setShowDropdown(false); setSearchTerm(''); }}
                          className="w-full text-left px-3 py-2 hover:bg-goldin-orange/10 flex items-center gap-2"
                        >
                          <div className="w-8 h-8 rounded-full bg-gray-200 overflow-hidden flex-shrink-0">
                            {f.photo_url && <img src={f.photo_url} alt="" className="w-full h-full object-cover" />}
                          </div>
                          <div>
                            <div className="font-medium text-sm">{f.first_name} {f.last_name}</div>
                            {f.organization && <div className="text-xs text-goldin-gray">{f.organization}</div>}
                          </div>
                        </button>
                      ))}
                    </div>
                  )}
                </>
              )}
            </div>
            
            {/* Type and Date */}
            <div className="grid grid-cols-2 gap-3">
              <div>
                <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Type</label>
                <select 
                  value={formData.interaction_type}
                  onChange={e => setFormData({...formData, interaction_type: e.target.value})}
                  className="w-full border rounded-lg px-3 py-2 text-sm"
                >
                  <option value="Call">üìû Call</option>
                  <option value="Email">üìß Email</option>
                  <option value="Meeting">ü§ù Meeting</option>
                  <option value="Site Visit">üè† Visit</option>
                  <option value="Note">üìù Note</option>
                  <option value="Event">üéâ Event</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Date</label>
                <input 
                  type="date"
                  value={formData.interaction_date}
                  onChange={e => setFormData({...formData, interaction_date: e.target.value})}
                  className="w-full border rounded-lg px-3 py-2 text-sm"
                />
              </div>
            </div>
            
            {/* Notes */}
            <div>
              <label className="block text-sm font-medium text-goldin-gray-dark mb-1">Notes</label>
              <textarea 
                value={formData.notes}
                onChange={e => setFormData({...formData, notes: e.target.value})}
                className="w-full border rounded-lg px-3 py-2 text-sm"
                rows={3}
                placeholder="What did you discuss?"
              />
            </div>
            
            {/* Submit */}
            <button
              type="submit"
              disabled={!selectedFellow || isSubmitting}
              className="w-full py-3 bg-gradient-to-r from-goldin-orange to-goldin-orange-dark text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {isSubmitting ? 'Saving...' : 'Log Interaction'}
            </button>
          </form>
        )}
      </div>
    </div>
  );
}

// Main App
function App() {
  const [fellows, setFellows] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [search, setSearch] = useState('');
  const [program, setProgram] = useState('');
  const [country, setCountry] = useState('');
  const [region, setRegion] = useState('');
  const [cohort, setCohort] = useState('');
  const [hood, setHood] = useState('');
  const [focusArea, setFocusArea] = useState('');
  const [contactStatus, setContactStatus] = useState('');
  const [selected, setSelected] = useState(null);
  const [logModalFellow, setLogModalFellow] = useState(null);
  
  const fetchData = async () => {
    setLoading(true);
    setError(null);
    try {
      const { data, error: fetchError } = await supabase.from('fellows').select('*').eq('status', 'Alumni').order('last_name', { ascending: true });
      if (fetchError) throw fetchError;
      if (!data || data.length === 0) throw new Error('No alumni found in the database.');
      setFellows(data);
      console.log(`‚úÖ Loaded ${data.length} alumni from Supabase`);
    } catch (err) {
      console.error('Error fetching data:', err);
      setError(err.message || 'Failed to load data. Please try again.');
    } finally {
      setLoading(false);
    }
  };
  
  useEffect(() => { fetchData(); }, []);
  
  // Focus area code to label mapping
  const FOCUS_AREA_LABELS = {
    'FA001': 'Youth Development',
    'FA002': 'Education',
    'FA003': 'Economic Empowerment',
    'FA004': 'Health & Wellness',
    'FA005': 'Environment & Climate',
    'FA006': 'Peace & Conflict Resolution',
    'FA007': 'Gender Equity',
    'FA008': 'Human Rights',
    'FA009': 'Community Organizing',
    'FA010': 'Arts & Culture',
    'FA011': 'Technology & Innovation',
    'FA012': 'Food Security',
    'FA013': 'Housing & Urban Development',
    'FA014': 'Mental Health',
    'FA015': 'Civic Engagement',
    'FA016': 'Entrepreneurship',
    'FA017': 'Social Justice',
    'FA018': 'Refugee & Immigration',
    'FA019': 'Violence Prevention',
    'FA020': 'Leadership Development'
  };
  
  const options = useMemo(() => {
    const regionsSet = new Set();
    const focusAreasSet = new Set();
    fellows.forEach(f => {
      const regionInfo = getRegionFromCountry(f.country);
      if (regionInfo.subRegion) regionsSet.add(regionInfo.subRegion);
      else if (regionInfo.region) regionsSet.add(regionInfo.region);
      // Collect focus areas
      if (f.focus_area_1) focusAreasSet.add(f.focus_area_1);
      if (f.focus_area_2) focusAreasSet.add(f.focus_area_2);
      if (f.focus_area_3) focusAreasSet.add(f.focus_area_3);
    });
    return {
      programs: [...new Set(fellows.map(f => f.program).filter(Boolean))].sort(),
      countries: [...new Set(fellows.map(f => f.country).filter(Boolean))].sort(),
      regions: [...regionsSet].sort(),
      cohorts: [...new Set(fellows.map(f => f.cohort).filter(Boolean))].sort().reverse(),
      hoods: [...new Set(fellows.map(f => f.community_area).filter(Boolean))].sort(),
      focusAreas: [...focusAreasSet].sort((a, b) => (FOCUS_AREA_LABELS[a] || a).localeCompare(FOCUS_AREA_LABELS[b] || b))
    };
  }, [fellows]);
  
  const filtered = useMemo(() => {
    return fellows.filter(f => {
      const s = search.toLowerCase();
      const name = `${f.first_name || ''} ${f.last_name || ''}`.toLowerCase();
      const matchSearch = !search || name.includes(s) || f.organization?.toLowerCase().includes(s) || f.city?.toLowerCase().includes(s) || f.country?.toLowerCase().includes(s) || f.job_title?.toLowerCase().includes(s) || f.biography?.toLowerCase().includes(s);
      let matchRegion = true;
      if (region) {
        const regionInfo = getRegionFromCountry(f.country);
        matchRegion = regionInfo.subRegion === region || regionInfo.region === region;
      }
      let matchStatus = true;
      if (contactStatus) {
        const status = getContactStatus(f.last_contact);
        matchStatus = status.color === contactStatus;
      }
      let matchFocusArea = true;
      if (focusArea) {
        matchFocusArea = f.focus_area_1 === focusArea || f.focus_area_2 === focusArea || f.focus_area_3 === focusArea;
      }
      return matchSearch && (!program || f.program === program) && (!country || f.country === country) && matchRegion && (!cohort || f.cohort === cohort) && (!hood || f.community_area === hood) && matchStatus && matchFocusArea;
    });
  }, [fellows, search, program, country, region, cohort, hood, contactStatus, focusArea]);
  
  const clearFilters = () => { setSearch(''); setProgram(''); setCountry(''); setRegion(''); setCohort(''); setHood(''); setContactStatus(''); setFocusArea(''); };
  const hasFilters = search || program || country || region || cohort || hood || contactStatus || focusArea;

  // State for quick add modal
  const [showQuickAdd, setShowQuickAdd] = useState(false);
  
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Top Header Bar - Mobile Optimized */}
      <header className="bg-gradient-to-r from-goldin-orange to-goldin-orange-dark text-white sticky top-0 z-50 shadow-lg">
        {/* Row 1: Logo, Pills, Toggle */}
        <div className="px-3 py-2 flex items-center justify-between gap-2">
          {/* Logo */}
          <div className="w-9 h-9 bg-white rounded-lg p-1 shadow-md flex-shrink-0">
            <img src={GATHER_LOGO} alt="GATHER" className="w-full h-full" />
          </div>
          
          {/* Status Pills - Compact */}
          {!loading && !error && (
            <div className="flex items-center gap-1">
              <button 
                onClick={() => setContactStatus(contactStatus === 'green' ? '' : 'green')}
                className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold transition-all ${
                  contactStatus === 'green' 
                    ? 'bg-green-500 text-white ring-2 ring-white/50' 
                    : 'bg-white text-green-700 border border-green-200'
                }`}
              >
                <span className={`w-1.5 h-1.5 rounded-full ${contactStatus === 'green' ? 'bg-white' : 'bg-green-500'}`}></span>
                <span>{fellows.filter(f => getContactStatus(f.last_contact).color === 'green').length}</span>
              </button>
              <button 
                onClick={() => setContactStatus(contactStatus === 'yellow' ? '' : 'yellow')}
                className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold transition-all ${
                  contactStatus === 'yellow' 
                    ? 'bg-yellow-500 text-white ring-2 ring-white/50' 
                    : 'bg-white text-yellow-700 border border-yellow-200'
                }`}
              >
                <span className={`w-1.5 h-1.5 rounded-full ${contactStatus === 'yellow' ? 'bg-white' : 'bg-yellow-500'}`}></span>
                <span>{fellows.filter(f => getContactStatus(f.last_contact).color === 'yellow').length}</span>
              </button>
              <button 
                onClick={() => setContactStatus(contactStatus === 'red' ? '' : 'red')}
                className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold transition-all ${
                  contactStatus === 'red' 
                    ? 'bg-red-500 text-white ring-2 ring-white/50' 
                    : 'bg-white text-red-700 border border-red-200'
                }`}
              >
                <span className={`w-1.5 h-1.5 rounded-full ${contactStatus === 'red' ? 'bg-white' : 'bg-red-500'}`}></span>
                <span>{fellows.filter(f => getContactStatus(f.last_contact).color === 'red').length}</span>
              </button>
            </div>
          )}
          
          {/* Dashboard Toggle Button */}
          <a 
            href="dashboard.html" 
            className="w-9 h-9 flex items-center justify-center bg-white/15 hover:bg-white/25 rounded-lg transition-colors"
            title="Staff Dashboard"
          >
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
          </a>
        </div>
        
        {/* Row 2: Add Button + Search */}
        <div className="px-3 pb-2 flex items-center gap-2">
          {/* Add Interaction Button */}
          <button 
            onClick={() => setShowQuickAdd(true)}
            className="w-9 h-9 flex-shrink-0 flex items-center justify-center bg-white text-goldin-orange rounded-lg shadow-md hover:shadow-lg transition-all active:scale-95"
            title="Log Interaction"
          >
            <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2.5} viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" d="M12 4v16m8-8H4" />
            </svg>
          </button>
          
          {/* Search Bar */}
          <div className="flex-1 relative">
            <svg className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            <input 
              type="text" 
              placeholder="Search alumni..." 
              value={search} 
              onChange={e => setSearch(e.target.value)} 
              className="w-full pl-9 pr-4 py-2 bg-white/10 backdrop-blur border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/30 focus:bg-white/20 text-sm"
            />
          </div>
        </div>
      </header>
      
      {/* Quick Add Modal - Opens with fellow search */}
      {showQuickAdd && (
        <QuickAddModal 
          fellows={fellows} 
          onClose={() => setShowQuickAdd(false)} 
          onSuccess={() => { fetchData(); setShowQuickAdd(false); }}
        />
      )}
      
      {loading ? <Loading /> : error ? <ErrorMsg message={error} onRetry={fetchData} /> : (
        <>
          {/* Filter Bar */}
          <div className="bg-white border-b shadow-sm sticky top-[60px] z-40">
            <div className="max-w-7xl mx-auto px-4 py-3">
              <div className="flex items-center gap-2 overflow-x-auto pb-1">
                <span className="text-sm text-goldin-gray font-medium whitespace-nowrap hidden md:inline">Filter:</span>
                <select value={program} onChange={e => setProgram(e.target.value)} className="filter-select px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-goldin-orange/50 bg-white text-sm whitespace-nowrap">
                  <option value="">All Programs</option>
                  {options.programs.map(p => <option key={p} value={p}>{p}</option>)}
                </select>
                <select value={cohort} onChange={e => setCohort(e.target.value)} className="filter-select px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-goldin-orange/50 bg-white text-sm whitespace-nowrap">
                  <option value="">All Years</option>
                  {options.cohorts.map(c => <option key={c} value={c}>{c}</option>)}
                </select>
                <select value={region} onChange={e => setRegion(e.target.value)} className="filter-select px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-goldin-orange/50 bg-white text-sm whitespace-nowrap">
                  <option value="">All Regions</option>
                  {options.regions.map(r => <option key={r} value={r}>{r}</option>)}
                </select>
                <select value={country} onChange={e => setCountry(e.target.value)} className="filter-select px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-goldin-orange/50 bg-white text-sm whitespace-nowrap">
                  <option value="">All Countries</option>
                  {options.countries.map(c => <option key={c} value={c}>{c}</option>)}
                </select>
                {options.hoods.length > 0 && (
                  <select value={hood} onChange={e => setHood(e.target.value)} className="filter-select px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-goldin-orange/50 bg-white text-sm whitespace-nowrap">
                    <option value="">Chicago Areas</option>
                    {options.hoods.map(h => <option key={h} value={h}>{h}</option>)}
                  </select>
                )}
                {options.focusAreas.length > 0 && (
                  <select value={focusArea} onChange={e => setFocusArea(e.target.value)} className="filter-select px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-goldin-orange/50 bg-white text-sm whitespace-nowrap">
                    <option value="">All Focus Areas</option>
                    {options.focusAreas.map(fa => <option key={fa} value={fa}>{FOCUS_AREA_LABELS[fa] || fa}</option>)}
                  </select>
                )}
                {hasFilters && (
                  <button onClick={clearFilters} className="px-3 py-2 text-goldin-orange hover:bg-goldin-orange/10 rounded-lg text-sm font-medium whitespace-nowrap flex items-center gap-1">
                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>
                    Clear
                  </button>
                )}
                
                {/* Results count - pushed to right */}
                <div className="flex-1"></div>
                <span className="text-sm text-goldin-gray whitespace-nowrap">
                  <strong className="text-goldin-gray-dark">{filtered.length}</strong> of {fellows.length}
                </span>
              </div>
            </div>
          </div>
          
          {/* Grid */}
          <main className="max-w-7xl mx-auto px-4 py-6">
            {filtered.length === 0 ? (
              <div className="text-center py-20">
                <div className="text-5xl mb-4">üîç</div>
                <h3 className="text-xl font-semibold text-goldin-gray-dark">No fellows found</h3>
                <p className="text-goldin-gray mt-2 mb-6">Try adjusting your filters</p>
                <button onClick={clearFilters} className="px-6 py-3 bg-goldin-orange text-white rounded-xl font-medium hover:bg-goldin-orange-dark">Clear Filters</button>
              </div>
            ) : (
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                {filtered.map(f => <FellowCard key={f.id} fellow={f} onClick={setSelected} />)}
              </div>
            )}
          </main>
        </>
      )}
      
      {/* Footer */}
      <footer className="bg-goldin-gray-dark text-white py-8 mt-12">
        <div className="max-w-7xl mx-auto px-4 flex flex-col md:flex-row items-center justify-between gap-4">
          <div className="flex items-center gap-3">
            <img src={GATHER_LOGO} alt="GATHER" className="w-8 h-8 rounded" />
            <div><p className="font-semibold">GATHER</p><p className="text-white/60 text-sm">Goldin Institute Fellow Network</p></div>
          </div>
          <p className="text-white/60 text-sm">¬© 2026 Goldin Institute</p>
        </div>
      </footer>
      
      {selected && <Modal fellow={selected} onClose={() => setSelected(null)} onLogInteraction={(f) => { setSelected(null); setLogModalFellow(f); }} />}
      
      <LogInteractionModal 
        isOpen={!!logModalFellow} 
        onClose={() => setLogModalFellow(null)} 
        fellow={logModalFellow}
        onSuccess={() => fetchData()}
      />
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
